!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Fireflies=i():t.Fireflies=i()}(self,(function(){return(()=>{"use strict";var t={d:(i,e)=>{for(var o in e)t.o(e,o)&&!t.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:e[o]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{Firefly:()=>w,default:()=>f});const e=(t,i)=>Math.floor(Math.random()*(i-t+1)+t),o=(t,i,e,o)=>{const s=e-t,h=o-i;return Math.sqrt(Math.pow(s,2)+Math.pow(h,2))};let s,h,r;const l={x:void 0,y:void 0,prevX:void 0,prevY:void 0,counter:0,isMoving:()=>!(l.counter>50)};let n;const a=[],d=t=>{r=requestAnimationFrame(d),h.clearRect(0,0,s.width,s.height),l.prevX==l.x&&l.prevY==l.y&&l.counter++;for(let t=0;t<a.length;t++)a[t].fly(),(a[t].x<0-a[t].radius||a[t].x>s.width+a[t].radius||a[t].y<0-a[t].radius||a[t].y>s.height+a[t].radius)&&(a[t].x=e(a[t].radius,s.width-a[t].radius),a[t].y=e(a[t].radius,s.height-a[t].radius));l.prevX=l.x,l.prevY=l.y},c=t=>{s.width=window.innerWidth,s.height=window.innerHeight},g=t=>{l.x=event.clientX,l.y=event.clientY,l.counter=0};class f{static initialize(t=Math.floor((window.innerHeight+window.innerWidth)/100),i=[5,25+Math.floor((window.innerHeight+window.innerWidth)/100)],o=[{fill:"#ffffea",glow:"#ff881b"}],r=!1,l=!0,f=!0,u=!1){this.terminate(),s=document.createElement("canvas"),document.body.appendChild(s),h=s.getContext("2d"),s.width=window.innerWidth,s.height=window.innerHeight,h.globalCompositeOperation="screen";for(let h=0;h<t;h++){let t;"[object Array]"===Object.prototype.toString.call(i)?(t=e(i[0],i[1]),n=1.5*i[1]):(t=i,n=1.5*i);const d=e(t,s.width-t),c=e(t,s.height-t),g=(y=o)[Math.floor(Math.random()*y.length)];a[h]=new w(d,c,t,g,r,l,f,u)}var y;addEventListener("resize",c),addEventListener("mousemove",g),d()}static terminate(){cancelAnimationFrame(r),removeEventListener("resize",c),removeEventListener("mousemove",g);for(let t=0;t<a.length;t++)a.splice(0,a.length);s&&s.remove()}}class w{constructor(t,i,o,s,h,r,l,n){this.x=t,this.y=i,this.radius=o,this.color={fill:s.fill,glow:s.glow},this.velocity={x:Math.random()*Math.PI,y:Math.random()*Math.PI},this.glow={pulse:r,flicker:l,default:void 0,strength:r?e(16,255):191,growing:!0},this.collision=h,this.connect=n}draw(){h.beginPath(),h.arc(this.x,this.y,this.radius,0,2*Math.PI,!1);const t=h.createRadialGradient(this.x,this.y,this.radius/10,this.x,this.y,this.radius);t.addColorStop(1,this.color.glow+"00"),t.addColorStop(.1,this.color.glow+this.glow.strength.toString(16)),t.addColorStop(0,this.color.fill),h.fillStyle=t,h.fill(),h.closePath()}fly(){this.collide(),this.stayWithinView(),this.x+=.75*Math.cos(this.velocity.x),this.y+=.75*Math.sin(this.velocity.y),this.calcGlow(),this.draw()}stayWithinView(){this.x+this.radius>=s.width||this.x-this.radius<=0?this.velocity.x-=.07:this.velocity.x+=20*Math.random()*Math.PI/180-10*Math.PI/180,this.y+this.radius>=s.height||this.y-this.radius<=0?this.velocity.y-=.07:this.velocity.y+=20*Math.random()*Math.PI/180-10*Math.PI/180}collide(){if(this.collision){this.calcField();const t=a.indexOf(this);for(let i=0;i<a.length;i++)if(a[i]!=a[t]){const t=o(this.x,this.y,a[i].x,a[i].y),e=this.radius+a[i].radius;t<=e&&(this.velocity.x-=.035,this.velocity.y-=.035,this.connect&&(h.save(),h.beginPath(),h.moveTo(this.x,this.y),h.lineTo(a[i].x,a[i].y),h.strokeStyle=`#ffffff${Math.floor(255-238*t/e).toString(16)}`,h.stroke(),h.closePath(),h.restore()))}}}calcField(){if(!l.isMoving())return;let t=this.x-l.x,i=this.y-l.y,e=Math.sqrt(Math.pow(t,2)+Math.pow(i,2)),o=Math.atan(Math.abs(i)/Math.abs(t));if(e>7*n)return;let s=8/Math.pow(e/n,1.5);e<this.radius&&(s=8);let h=s*Math.cos(o)*(t/Math.abs(t)),r=s*Math.sin(o)*(i/Math.abs(i));Number.isFinite(h)&&(this.x+=h),Number.isFinite(r)&&(this.y+=r)}calcGlow(){void 0===this.glow.default&&(this.glow.default=this.glow.strength),this.glow.pulse&&(this.glow.default>=255?this.glow.growing=!1:this.glow.default<=48&&(this.glow.growing=!0),this.glow.growing?(this.glow.default++,this.glow.strength=this.glow.default):(this.glow.default--,this.glow.strength=this.glow.default)),this.glow.flicker&&(Math.random()>.99?this.glow.strength=e(16,255):this.glow.strength=this.glow.default)}}return i.default})()}));